<!-- The following tables can be grouped -->
<div data-review-topic="true">
  <% @user_stats.each do |obj| %>
    <% if obj[:users] %>
      <h3><%= t("yearly_review.title.#{obj[:key]}") %></h3>
      <table>
        <tr>
          <th>
            <%= t('yearly_review.user') %>
          </th>
          <th>
            <%= t("yearly_review.action.#{obj[:key]}") %>
          </th>
        </tr>
        <% obj[:users].each do |user| %>
          <tr>
            <td>
              <%= raw(avatar_image(user.username, user.uploaded_avatar_id)) %>
              <%= raw(user_link(user.username)) %>
            </td>
            <td>
              <%= user.action_count %>
            </td>
          </tr>
        <% end %>
      </table>
    <% end %>
  <% end %>
</div>

<h3><%= t('yearly_review.most_liked_topics.title') %></h3>
<%= raw(@most_liked_topics.join("\r\r")) %>

<h3><%= t('yearly_review.most_liked_posts.title') %></h3>
<%= raw(@most_liked_posts.join("\r\r")) %>

<h3><%= t('yearly_review.most_replied_to_topics.title') %></h3>
<%= raw(@most_replied_to_topics.join("\r\r")) %>

<% if @featured_badge_users %>
  <h3><%= t("yearly_review.featured_badge.title", badge_name: SiteSetting.yearly_review_featured_badge) %></h3>
  <% @featured_badge_users.each do |user| %>
    <span><%= raw(avatar_image(user.username, user.uploaded_avatar_id)) %><%= raw(user_link(user.username)) %></span>
  <% end %>
<% end %>
